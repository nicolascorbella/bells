<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guardian Bell</title>
    <link rel="icon" href="./images/favicon.png" type="image/x-icon" />
    <link rel="shortcut icon" href="../../images/logo.png" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="../../css/main.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&display=swap" rel="stylesheet">

  </head>
  <body>
    
   <header>

      <a href="https://theguardianbell.com.ar"><img src="../../images/logo.png" alt="" class="logo">
        <h1>THE GUARDIAN BELL</h1>
     </a>
      <span class="material-symbols-outlined shopping_bag"><a href="/tienda">
        shopping_bag
        </span></a>
        <nav class="desk-ul">
          <ul>
            <li>
              PRODUCTOS
              <div class="productos">
                <ol>
                  <a href="/TIENDA"><li>CAMPANAS</li></a>
                  <a href="/TIENDA"><li>JOYAS</li></a>
              
                </ol>
              </div>
            </li>
            <a href="/tienda"><li>TIENDA</li></a>
            <a href="/historia"><li>LEYENDA</li></a>
          </ul>
        </nav>
    </header>
    <label class="hamburger-menu">
      <input type="checkbox" id="menu-toggle" />
    </label>
    <aside class="sidebar">
      <nav>
        <a href="https://theguardianbell.com.ar"><div>INICIO</div></a>
        <div class="headerline"></div>
        <a href="/tienda"><div>TIENDA</div></a>
        <div class="headerline"></div>
        <div><a href="/historia">LEYENDA</div></a>
        <div class="headerline"></div>
        
      </nav>
    </aside>
    
  <section class="container-producto">
    
    <h3 class="producto-nombre">Calavera</h3>
    <div id="carouselProducto" class="carousel">
        <div class="carousel-item active">
            <img src="img1.webp" alt="Imagen 1">
        </div>
        <div class="carousel-item">
          <img src="./img2.jpg" alt="Imagen 2">
      </div>
      <div class="carousel-item">
          <img src="./img3.jpg" alt="Imagen 3">
      </div>
      <button class="carousel-control prev" onclick="prevSlide()">&#10094;</button>
      <button class="carousel-control next" onclick="nextSlide()">&#10095;</button>
  </div>
  <article class="producto-informacion">
<p>Experimentá la magia de nuestras Guardian Bells, encantadores amuletos que los motociclistas de todo el mundo adoran. Estas campanas encantadas son mucho más que simples accesorios; son símbolos de suerte y protección en la ruta.
</p>
  </article>
  <a href="./../../carrito" class="carrito-enlace" title="Ver carrito">
    <div id="numerito" class="carrito-float">
        <i class="bi bi-cart-fill"></i> <!-- Icono del carrito -->
        <span class="contador">0</span> <!-- Aquí es donde se mostrará el número -->
    </div>
</a>

  <button id="comprar-ahora">Comprar ahora</button>
    <div class="cards" id="cards">
      <h5>Elija una opción</h5>
      <div class="card card--1">
        <div class="card__info-hover">
          
            <div class="card__clock-info">
              <svg class="card__clock"  viewBox="0 0 24 24"><path d="M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M11,14H13V8H11M15,1H9V3H15V1Z" />
              </svg>Envíos en el día(GBA).
            </div>
          
        </div>
        <div class="card__img"></div>
        <a href="./../../carrito-con-envio" class="card_link">
           <div class="card__img--hover"></div>
         </a>
        <div class="card__info">
          <span class="card__category"></span>
          <h3 class="card__title">Comprá con envío a domicilio</h3>
          <span class="card__by">23.000 ARS <a href="#" class="card__author" title="author"></a></span>
        </div>
      </div>
        
        
      <div class="card card--2">
        <div class="card__info-hover">
          
            <div class="card__clock-info">
              
            </div>
          
        </div>
        <div class="card__img"></div>
        <a href="./../../carrito-con-retiro" class="card_link">
           <div class="card__img--hover"></div>
         </a>
        <div class="card__info">
          <span class="card__category"></span>
          <h3 class="card__title">Retirá en sucursal (San Martín)</h3>
          <span class="card__by">20.000 ARS<a href="#" class="card__author" title="author"></a></span>
        </div>
      </div>
      
</section>
<section class="caracteristicas-producto">
    <h2>Características del producto</h2>

    <div class="contenedor-caracteristicas">
        <!-- Características principales -->
        <div class="caracteristicas-principales">
            <h3>Características principales</h3>
            <table>
                <tr>
                    <td class="label">Marca</td>
                    <td class="value">Guardian Bell original USA</td>
                </tr>
            </table>
        </div>

        <!-- Otros -->
        <div class="otros">
            <h3>Otros</h3>
            <table>
                <tr>
                    <td class="label">Material</td>
                    <td class="value">Acero inoxidable</td>
                </tr>
                <tr>
                    <td class="label">Origen</td>
                    <td class="value">USA</td>
                </tr>
            </table>
          </section>
        </div>
    </div>
    
</section>
  
<footer>
  <div class="redes">REDES SOCIALES</div>
  <div class="footerline"></div>
  <picture>  <a href="" target="_blank">
      <img class="footer-img" src="../../images/fb.png">
</a>
<a href="https://www.instagram.com/theguardianbell/" target="_blank">
  
  <img class="" src="../../images/ig.png">
</a>
<a href="" target="_blank">
  
  <img class="" src="../../images/wpp.png">
</a></picture>

  <p>The Guardian Bell</p>
</footer>
<!-- CSS de Bootstrap -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Obtener los productos en el carrito desde localStorage
    let productosEnCarritoLS = localStorage.getItem("productos-en-carrito");
    let totalProductos = 0;

    // Verificar si hay productos en el carrito
    if (productosEnCarritoLS) {
        // Parsear los datos para obtener un array de productos
        const productosEnCarrito = JSON.parse(productosEnCarritoLS);

        // Calcular el total de productos en el carrito
        totalProductos = productosEnCarrito.reduce((acc, producto) => acc + producto.cantidad, 0);
    }

    // Actualizar el contador en el DOM
    const contadorElement = document.querySelector("#numerito .contador");
    if (contadorElement) {
        contadorElement.innerText = totalProductos; // Establecer el número total de productos
    } else {
        console.error("No se encontró el elemento contador dentro de numerito");
    }
});

 document.querySelector("#comprar-ahora").addEventListener("click", function() {
    // Hacer el fetch del archivo productos.json
    fetch("./../../productos.json")
        .then(response => {
            if (!response.ok) {
                throw new Error("No se pudo cargar productos.json");
            }
            return response.json();
        })
        .then(data => {
            // Buscar el producto con id "campana01"
            const productoCalavera = data.find(producto => producto.id === "campana01");

            if (productoCalavera) {
                // Obtener los productos en el carrito desde localStorage
                let productosEnCarrito = localStorage.getItem("productos-en-carrito");

                if (productosEnCarrito) {
                    productosEnCarrito = JSON.parse(productosEnCarrito);

                    // Verificar si el producto ya está en el carrito
                    const productoExistente = productosEnCarrito.find(producto => producto.id === productoCalavera.id);

                    if (productoExistente) {
                        productoExistente.cantidad++;
                    } else {
                        productoCalavera.cantidad = 1; // Añadir cantidad si no existe
                        productosEnCarrito.push(productoCalavera);
                    }
                } else {
                    productoCalavera.cantidad = 1; // Añadir cantidad si no existe
                    productosEnCarrito = [productoCalavera];
                }

                // Guardar el carrito actualizado en localStorage
                localStorage.setItem("productos-en-carrito", JSON.stringify(productosEnCarrito));

                // Actualizar el contador de productos en el carrito
                actualizarNumerito();

                // Añadir la clase 'cards-active' al div con id 'cards'
                const cardElement = document.querySelector("#cards");
                
                if (cardElement) {
                    cardElement.classList.add("cards-active");
                    console.log("La clase 'cards-active' ha sido añadida al div con id 'cards'");
                } else {
                    console.error("No se encontró el elemento con id 'cards'");
                }
            } else {
                console.error("Producto con id campana01 no encontrado en productos.json");
            }
        })
        .catch(error => {
            console.error("Error al obtener productos:", error);
        });
});

function actualizarNumerito() {
    let productosEnCarrito = JSON.parse(localStorage.getItem("productos-en-carrito")) || [];
    let totalProductos = productosEnCarrito.reduce((acc, producto) => acc + producto.cantidad, 0);

    const contadorElement = document.querySelector("#numerito .contador"); // Selecciona solo el contador
    
    if (contadorElement) {
        contadorElement.innerText = totalProductos; // Actualiza solo el número
    } else {
        console.error("No se encontró el elemento contador dentro de numerito");
    }
}
// ------------------ Carrusel Manual ------------------

let currentSlide = 0;
  const slides = document.querySelectorAll('.carousel-item');
  
  // Función para mostrar la diapositiva según el índice
  function showSlide(index) {
      // Ocultar todas las diapositivas
      slides.forEach(slide => slide.classList.remove('active'));
      
      // Asegurarse de que el índice sea válido
      currentSlide = (index + slides.length) % slides.length;
      
      // Mostrar la diapositiva actual
      slides[currentSlide].classList.add('active');
  }
  
  // Funciones para cambiar a la siguiente o anterior diapositiva
  function nextSlide() {
      showSlide(currentSlide + 1);
  }
  
  function prevSlide() {
      showSlide(currentSlide - 1);
  }
  
  // Inicializar el carrusel mostrando la primera diapositiva
  showSlide(currentSlide);
  
  // Asignar eventos a los botones de control del carrusel
  document.querySelector('.carousel-control.next').addEventListener('click', nextSlide);
  document.querySelector('.carousel-control.prev').addEventListener('click', prevSlide);
</script>
  </body>
</html>
