<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guardian Bell</title>
    <link rel="icon" href="./images/favicon.png" type="image/x-icon" />
    <link rel="shortcut icon" href="../images/logo.png" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="./css/main.css" />

  </head>
  <body>
    <header>

        <a href="https://theguardianbell.com.ar"><img src="./images/logo.png" alt="" class="logo">
        <h1>TheGuardianBell</h1></a>
        <span class="material-symbols-outlined shopping_bag"><a href="/tienda">
          shopping_bag
          </span></a>
          <nav class="desk-ul">
            <ul>
              <li>
                Productos
                <div class="productos">
                  <ol>
                    <a href="/cruzmalta"><li>Campanas</li></a>
                    <a href="/ruta66"><li>Joyas</li></a>
                
                  </ol>
                </div>
              </li>
              <a href="/tienda"><li>Tienda</li></a>
              <a href="/historia"><li>Leyenda</li></a>
            </ul>
          </nav>
      </header>
      <label class="hamburger-menu">
        <input type="checkbox" id="menu-toggle" />
      </label>
      <aside class="sidebar">
        <nav>
          <a href="https://theguardianbell.com.ar"><div>Inicio</div></a>
          <div class="headerline"></div>
          <a href="/tienda"><div>Tienda</div></a>
          <div class="headerline"></div>
          <div><a href="/historia">La leyenda de la campanas</div></a>
          <div class="headerline"></div>
          
        </nav>
      </aside>
                <button class="close-menu" id="close-menu">
                    <i class="bi bi-x"></i>
                </button>
                <div>
                    <div>
                    
                        
                    </div>
                </div>
            </aside>
  
<div class="wrapper">
   
    <div class="aside">
        </button>
        <div>
            <div class="menu">
        
                <div>
                    <a class="boton-menu" href="./carrito">
                        <i class="bi bi-cart-fill"></i> <span id="numerito" class="numerito">0</span> Ir al carrito
                    </a>
                </div>
            </div>
        </div>
    </div>
    <main class="main">
        <h5>Ordenar por</h5>
        <div class="ordenar-opciones">
            <button id="ordenar-menor" class="ordenar-boton">Menor precio</button>
            <button id="ordenar-mayor" class="ordenar-boton">Mayor precio</button>
        </div>
        <h2 class="titulo-principal" id="titulo-principal">Todos los productos</h2>
        <div id="contenedor-productos" class="contenedor-productos">
            <!-- Esto se va a rellenar con JS -->
        </div>
    </main>
    
</div>
<footer>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="./js/main.js"></script>
<script src="./js/menu.js"></script>

  <div class="redes">Redes Sociales</div>
  <div class="footerline"></div>
  <picture>  <a href="https://www.facebook.com/profile.php?id=61552309236999" target="_blank">
      <img class="footer-img" src="../images/fb.png">
</a>
<a href="https://www.instagram.com/bairesrealestate/" target="_blank">
  
  <img class="" src="../images/ig.png">
</a>
<a href="https://wa.link/jkkn0f" target="_blank">
  
  <img class="" src="../images/wpp.png">
</a></picture>

  <p>SP Bells</p>
</footer>
<script>let productos = [];

    fetch("./productos.json")
        .then(response => response.json())
        .then(data => {
            productos = data;
            cargarProductos(productos); // Cargar productos inicialmente
        });
    
    const contenedorProductos = document.querySelector("#contenedor-productos");
    const tituloPrincipal = document.querySelector("#titulo-principal");
    let botonesAgregar = document.querySelectorAll(".producto-agregar");
    const numerito = document.querySelector("#numerito");
    
    // Botones para ordenar
    const botonMenor = document.querySelector("#ordenar-menor");
    const botonMayor = document.querySelector("#ordenar-mayor");
    
    // Función para manejar el ordenamiento
    function ordenarProductos(criterio) {
        if (criterio === "menor") {
            productos.sort((a, b) => a.precio - b.precio);
        } else if (criterio === "mayor") {
            productos.sort((a, b) => b.precio - a.precio);
        }
        cargarProductos(productos);
    }
    
    // Evento para ordenar por menor precio
    botonMenor.addEventListener("click", () => {
        ordenarProductos("menor");
        actualizarClaseActive(botonMenor);
    });
    
    // Evento para ordenar por mayor precio
    botonMayor.addEventListener("click", () => {
        ordenarProductos("mayor");
        actualizarClaseActive(botonMayor);
    });
    
    // Función para actualizar la clase active
    function actualizarClaseActive(botonSeleccionado) {
        const botones = document.querySelectorAll(".ordenar-boton");
        botones.forEach(boton => boton.classList.remove("ordenar-active"));
        botonSeleccionado.classList.add("ordenar-active");
    }
    
    function cargarProductos(productosElegidos) {
        contenedorProductos.innerHTML = "";
    
        productosElegidos.forEach(producto => {
            const div = document.createElement("div");
            div.classList.add("producto");
    
            const enlace = document.createElement("a");
            enlace.href = `/campanas/${encodeURIComponent(producto.titulo.toLowerCase())}`;
            enlace.target = "";
    
            const imagenProducto = document.createElement("img");
            imagenProducto.classList.add("producto-imagen");
            imagenProducto.src = producto.imagen;
            imagenProducto.alt = producto.titulo;
    
            enlace.appendChild(imagenProducto);
    
            const detalles = document.createElement("div");
            detalles.classList.add("producto-detalles");
    
            detalles.innerHTML = `
                <h3 class="producto-titulo">${producto.titulo}</h3>
                <p class="producto-precio">$${producto.precio}</p>
                <button class="producto-agregar" id="${producto.id}">Agregar</button>
            `;
    
            div.appendChild(enlace);
            div.appendChild(detalles);
    
            contenedorProductos.append(div);
        });
    
        actualizarBotonesAgregar();
    }
    
    function actualizarBotonesAgregar() {
        botonesAgregar = document.querySelectorAll(".producto-agregar");
    
        botonesAgregar.forEach(boton => {
            boton.addEventListener("click", agregarAlCarrito);
        });
    }
    
    let productosEnCarrito = [];
    let productosEnCarritoLS = localStorage.getItem("productos-en-carrito");
    
    if (productosEnCarritoLS) {
        productosEnCarrito = JSON.parse(productosEnCarritoLS);
        actualizarNumerito();
    }
    
    function agregarAlCarrito(e) {
        const idBoton = e.currentTarget.id;
        const productoAgregado = productos.find(producto => producto.id === idBoton);
    
        if (productosEnCarrito.some(producto => producto.id === idBoton)) {
            const index = productosEnCarrito.findIndex(producto => producto.id === idBoton);
            productosEnCarrito[index].cantidad++;
        } else {
            productoAgregado.cantidad = 1;
            productosEnCarrito.push(productoAgregado);
        }
    
        actualizarNumerito();
        localStorage.setItem("productos-en-carrito", JSON.stringify(productosEnCarrito));
    }
    
    function actualizarNumerito() {
        let nuevoNumerito = productosEnCarrito.reduce((acc, producto) => acc + producto.cantidad, 0);
        numerito.innerText = nuevoNumerito;
    }
  </script>
  <script>  //scroll
    const menuToggle = document.getElementById('menu-toggle');
      if (menuToggle) {
          menuToggle.addEventListener('change', function() {
              if (this.checked) {
                  document.body.classList.add('no-scroll');
              } else {
                  document.body.classList.remove('no-scroll');
              }
          });
      }</script>
  </body>
</html>
